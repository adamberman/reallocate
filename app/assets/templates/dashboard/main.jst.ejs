<div id='navbar'></div>
<h2>
	Dashboard!
</h2>
<h4>
	You have <%= user.escape('hours') %> hours
</h4>
<div class="column" id='initialized-requests'>
	<h4>Initialized Requests</h4>
	<% for (var i = 0; i < requests.length; i++) { %>
		<% var request = requests.at(i); %>
		<div class='dashboard-item'>
			<h4><%= request.escape('name') %></h4>
			<% var transactions = request.transactions(); %>
			<% if (transactions.length === 0) { %>
				<p>No Transactions on this request</p>
			<% } else { %>
				<% for (var j = 0; j < transactions.length; j++) { %>
					<% var transaction = transactions.at(j); %>
					<button 
						class='btn btn-primary transaction'
						data-requestid='<%= request.id %>'
						data-transactionid='<%= transaction.id %>'>
						<%= transaction.escape('name') %>
					</button>
					<p><%= transaction.escape('status') %></p>
					<% if (transaction.get('status') === 'Accepted') { %>
						<button
							class='btn btn-primary transaction-pay'
							data-requestid='<%= request.id %>'
							data-transactionid='<%= transaction.id %>'>
							Pay: <%= transaction.escape('name') %>
						</button>
					<% } %>
				<% } %>
			<% } %>
		</div>
	<% } %>
</div>
<div class="column" id='initialized-offers'>
	<h4>Initialized Offers</h4>
	<% for (var i = 0; i < offers.length; i++) { %>
		<% var offer = offers.at(i); %>
		<div class='dashboard-item'>
			<h4><%= offer.escape('name') %></h4>
			<% var transactions = offer.transactions(); %>
			<% if (transactions.length === 0) { %>
				<p>No Transactions on this offer</p>
			<% } else { %>
				<% for (var j = 0; j < transactions.length; j++) { %>
					<% var transaction = transactions.at(j); %>
					<button 
						class='btn btn-primary transaction'
						data-offerid='<%= offer.id %>'
						data-transactionid='<%= transaction.id %>'>
						<%= transaction.escape('name') %>
					</button>
					<p><%= transaction.escape('status') %></p>
				<% } %>
			<% } %>
		</div>
	<% } %>
</div>
<div class="column" id='responded-requests'>
	<h4>Responded Requests</h4>
	<% for (var i = 0; i < respondedRequests.length; i++) { %>
		<% var transaction = respondedRequests.at(i); %>
		<div class='dashboard-item'>
			<h4><%= transaction.escape('name') %></h4>
			<button 
				class='btn btn-primary transaction'
				data-requestid='<%= transaction.get("listable_id") %>'
				data-transactionid='<%= transaction.id %>'>
				<%= transaction.escape('name') %>
			</button>
			<p><%= transaction.escape('status') %></p>
			<% if (transaction.get('status') === 'Accepted') { %>
				<button
					class='btn btn-primary transaction-pay'
					data-requestid='<%= transaction.get("listable_id") %>'
					data-transactionid='<%= transaction.id %>'>
					Pay: <%= transaction.escape('name') %>
				</button>
			<% } %>
		</div>
	<% } %>
</div>
<div class="column" id='initialized-offers'>
	<h4>Responded Offers</h4>
	<% for (var i = 0; i < respondedOffers.length; i++) { %>
		<% transaction = respondedOffers.at(i); %>
		<div class='dashboard-item'>
			<h4><%= transaction.escape('name') %></h4>
			<button 
				class='btn btn-primary transaction'
				data-offerid='<%= transaction.get("listable_id") %>'
				data-transactionid='<%= transaction.id %>'>
				<%= transaction.escape('name') %>
			</button>
			<p><%= transaction.escape('status') %></p>
		</div>
	<% } %>
</div>
<div class="modals"></div>